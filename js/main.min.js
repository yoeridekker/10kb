function weather(t){getJSONP("https://api.darksky.net/forecast/9435460ac274999f8dcd0ba124acb7dc/"+lat+","+lng+"?exclude=currently,minutely,hourly,flags,alerts&units=ca&lang=en&callback="+t)}function getLocation(){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(showPosition,showError)}function showPosition(t){lat=t.coords.latitude,lng=t.coords.longitude,weather("loadResults")}function showError(t){if(LS){var e=localStorage.getItem("lat");e&&null!=e&&(lat=e);var a=localStorage.getItem("lng");a&&null!=a&&(lng=a);var l=localStorage.getItem("cty");l&&null!=l&&(plc=l,document.getElementById("city").value=plc)}loadResults()}function loadResults(e){var a=t.getMonth()+"-"+t.getDate()+"-"+lat+"-"+lng;if(LS)var l=localStorage.getItem(a);LS&&null!=l?setData(JSON.parse(l)):weather("setData")}function setData(e){id=0,console.log(e);var a=t.getMonth()+"-"+t.getDate()+"-"+lat+"-"+lng;LS&&(localStorage.setItem(a,JSON.stringify(e)),localStorage.setItem("lat",lat),localStorage.setItem("lng",lng),localStorage.setItem("cty",plc));var l="";for(var n in e.daily.data)date=new Date(1e3*e.daily.data[n].time),l+='<div class="day"><div class="'+e.daily.data[n].icon+' slide"><h3 class="temp"><small>'+mn[date.getMonth()]+" "+date.getDate()+", "+date.getFullYear()+"</small>"+e.daily.data[n].temperatureMax.toFixed(1)+'&deg;</h3><br><span id="location">'+plc+"</span><br>"+e.daily.data[n].summary+"<ul><li><span>Wind</span>"+e.daily.data[n].windSpeed.toFixed(1)+" km/h</li><li><span>Rain</span>"+e.daily.data[n].precipProbability.toFixed(2)+"%</li></ul></div></div>",document.getElementById("result").innerHTML=l;SD();var i=document.getElementById("navleft");i.removeEventListener("click",navigateLeft),i.addEventListener("click",navigateLeft),i.style.display="block";var o=document.getElementById("navright");o.removeEventListener("click",navigateRight),o.addEventListener("click",navigateRight),o.style.display="block"}function navigateLeft(){id--,SD()}function navigateRight(){id++,SD()}function SD(){var t,e=document.getElementsByClassName("day"),a=e.length;for(id>=a&&(id=0),0>id&&(id=a-1),t=0;a>t;t++)e[t].className="day";e[id].className+=" active"}function onCityFocus(){null==google&&getJSONP("https://maps.googleapis.com/maps/api/js?v=3&sensor=false&libraries=places&key=AIzaSyCsTkbAiMEEHoHYlac6Gr5sOIS0-QVzQic&callback=googleSuggest"),cityval=cityinput.value,cityinput.value=""}function onCityBlur(){""==cityinput.value&&""!=cityval&&(cityinput.value=cityval)}function googleSuggest(){var t=document.getElementById("city"),e=new google.maps.places.Autocomplete(t,{types:["(cities)"]});google.maps.event.addListener(e,"place_changed",function(){var t=e.getPlace();t.geometry&&(lat=t.geometry.location.lat(),lng=t.geometry.location.lng(),plc=t.formatted_address,LS&&(localStorage.setItem("cty",plc),localStorage.setItem("lat",lat),localStorage.setItem("lng",lng)),weather("loadResults"))})}function getJSONP(t){var e=document.createElement("script");e.src=t,document.head.appendChild(e)}var LS="undefined"!=typeof Storage?!0:!1,mn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],google=null,id=0,lat=52.75,lng=5.96,plc="The Netherlands",t=new Date,cityinput=document.getElementById("city"),cityval=document.getElementById("city").value;getLocation(),cityinput.addEventListener("focus",onCityFocus,!0),cityinput.addEventListener("blur",onCityBlur,!0);